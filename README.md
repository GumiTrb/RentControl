# RentControl — система учёта аренды недвижимости

RentControl — это настольное Java-приложение для учёта аренды жилой и коммерческой недвижимости.  
Система помогает арендодателям и небольшим агентствам вести базу арендаторов и объектов, оформлять
договоры, контролировать платежи и анализировать задолженности без использования отдельной БД и
облачных сервисов.

---

## Основные возможности

- управление справочниками:
  - арендаторы (Tenants);
  - арендодатели (Landlords);
  - объекты недвижимости (Properties);
- оформление и сопровождение договоров аренды (Contracts);
- учёт платежей с разделением по типам:
  - аренда;
  - депозит;
  - коммунальные услуги и др.;
- автоматический расчёт:
  - статуса договора («Активен», «Завершён»);
  - баланса по договору (оплачен / долг);
  - графика арендных платежей на весь период аренды;
- защита целостности данных:
  - запрет удаления сущностей, участвующих в активных договорах;
  - валидация пользовательского ввода;
- логирование всех операций (успешные действия, ошибки, предупреждения);
- удобный минималистичный интерфейс на JavaFX:
  - вертикальное меню разделов;
  - списки сущностей с поиском;
  - карточки подробной информации;
  - отдельный экран расчёта платежей.

---

## Технологии

- **Java 17**
- **JavaFX** — пользовательский интерфейс (FXML + CSS)
- **Gson** — сериализация/десериализация данных в формате JSON
- **Log4j2** — логирование
- **IntelliJ IDEA** — основная среда разработки

Приложение работает **офлайн**, не требует установки СУБД и хранит данные в JSON-файлах.

---

## Структура проекта

```text
RentControl/
├── data/                     # Папка с рабочими JSON-файлами (создаётся при запуске)
│   ├── tenants.json
│   ├── landlords.json
│   ├── properties.json
│   ├── contracts.json
│   └── payments.json
├── logs/                     # Логи приложения (rentcontrol.log)
├── src/
│   ├── contracts/
│   │   ├── Contract.java          # Модель договора
│   │   └── ContractService.java   # Логика работы с договорами
│   ├── exceptions/
│   │   ├── EntityNotFoundException.java
│   │   ├── StorageException.java
│   │   └── ValidationException.java
│   ├── landlords/
│   │   ├── Landlord.java          # Модель арендодателя
│   │   └── LandlordService.java   # Сервис арендодателей
│   ├── payments/
│   │   ├── Payment.java           # Модель платежа
│   │   └── PaymentService.java    # Расчёт баланса, сортировка, фильтрация
│   ├── properties/
│   │   ├── Property.java          # Модель объекта недвижимости
│   │   └── PropertyService.java   # Сервис объектов
│   ├── tenants/
│   │   ├── Tenant.java            # Модель арендатора
│   │   └── TenantService.java     # Сервис арендаторов
│   ├── BaseEntity.java            # Базовый класс для сущностей с id
│   ├── JsonStorage.java           # Обобщённое JSON-хранилище (CRUD + сериализация)
│   ├── MainApp.java               # Точка входа в JavaFX-приложение
│   ├── MainController.java        # Главный контроллер интерфейса
│   ├── main-view.fxml             # Разметка основного окна
│   └── styles.css                 # Оформление интерфейса
├── uml/
│   ├── classes.puml               # UML-диаграмма классов
│   └── architecture.puml          # Общая схема архитектуры
└── README.md                      # Описание проекта
```

## Архитектура

Приложение реализует **трёхслойную архитектуру**, обеспечивая разделение ответственности и удобство сопровождения:

---

## UML-диаграмма проекта

Ниже представлена UML-диаграмма, отражающая архитектуру всего программного комплекса.  
Диаграмма включает:

- все доменные сущности (Tenant, Landlord, Property, Contract, Payment);
- сервисные классы (`TenantService`, `ContractService`, `PaymentService` и др.);
- слой хранения данных (`JsonStorage<T>`);
- пользовательский интерфейс (JavaFX контроллеры);
- классы исключений (`ValidationException`, `StorageException`, `EntityNotFoundException`);
- связи между объектами: ассоциации, зависимости, композиции;
- структуры пакетов проекта.

Диаграмма визуализирует архитектуру приложения и демонстрирует взаимосвязи между модулями, что подтверждает реализацию трёхслойной модели (UI → Services → Storage) и строгую объектно-ориентированную структуру системы.

### UML-диаграмма:

![UML Diagram](docs/uml-diagram.png)


<img width="1259" height="1062" alt="test-UML___RentControl" src="https://github.com/user-attachments/assets/d2d9d1bf-579e-414b-813d-ff6c76a51a15" />


### UI-слой (JavaFX)

Файлы:

- `MainApp.java`
- `MainController.java`
- `main-view.fxml`
- `styles.css`

Функции:

- отображение данных,
- обработка действий пользователя,
- передача запросов в слой сервисов.

---

### Слой бизнес-логики (Services)

Классы:

- `TenantService`
- `LandlordService`
- `PropertyService`
- `ContractService`
- `PaymentService`

Реализуют:

- CRUD-операции;
- валидацию пользовательского ввода;
- проверку бизнес-ограничений;
- расчёт балансов и статусов договоров;
- формирование графиков арендных платежей.

---

### Слой хранения данных (Storage)

Компоненты:

- `JsonStorage<T>`
- JSON-файлы в папке `data/`

Функции:

- сериализация и десериализация сущностей,
- атомарное сохранение данных,
- независимость от внешних СУБД.

---

### Слой исключений

Пакет `exceptions/` включает:

- ошибки валидации,
- ошибки логики,
- ошибки хранения данных.

Это обеспечивает централизованную обработку ошибок и чистую архитектуру.

---

## Как запустить проект

### Предварительные требования

- **JDK 17** (или выше)
- **IntelliJ IDEA**
- **JavaFX SDK** (если не подключается автоматически)

---

## Работа с приложением

### Арендаторы / Арендодатели / Объекты

- добавление, редактирование и удаление записей;
- быстрый поиск по списку;
- защита от удаления сущностей, участвующих в активных договорах.

---

### Договоры

- выбор арендатора, арендодателя и объекта;
- указание периода аренды;
- автоматическое определение статуса договора  
  *(«Активен», «Завершён» в зависимости от текущей даты)*.

---

### Платежи

- поддержка нескольких типов: аренда, депозит, коммунальные услуги и др.;
- перерасчёт баланса **только по платежам типа “Аренда”**;
- сортировка платежей по дате;
- визуальное отображение статуса договора  
  *(оплачен / долг)*.

---

### Расчёт графика арендных платежей

- ввод дат начала и окончания аренды;
- вычисление количества месяцев аренды;
- расчёт итоговой стоимости;
- генерация подробной таблицы с периодами и суммами;
- отображение итогового платежа в интерфейсе.

---
